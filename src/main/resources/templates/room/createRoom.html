<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>방 만들기</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            margin: 40px;
            background-color: #f9f9f9;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        .map-card {
            width: 80%;
            margin: 20px auto;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .map-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .create-room-form {
            margin-top: 10px;
        }

        input[type="text"] {
            padding: 8px;
            margin: 5px;
            width: 40%;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            padding: 8px 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #388e3c;
        }

        form[method="get"] {
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<h1>맵을 선택해 방 만들기</h1>

<!-- 검색 -->
<form method="get" th:action="@{/rooms/create}">
    <input type="text" name="keyword" th:value="${keyword}" placeholder="맵 이름 검색">
    <button type="submit">검색</button>
</form>

<!-- 맵 리스트 -->
<div th:each="map : ${mapPage.content}" class="map-card">
    <div class="map-title" th:text="${map.mapname}">맵 이름</div>
    <div>문제 수: <span th:text="${map.nQuiz}">10</span></div>

    <!-- 방 생성 폼 -->
    <form th:action="@{/rooms/create}" method="post" th:id="'form-' + ${map.id}" class="create-room-form">
        <input type="hidden" name="mapId" th:value="${map.id}">
        <input type="text" name="roomname" placeholder="방 이름" required>
        <input type="text" name="password" placeholder="비밀번호 (선택)">
        <button type="submit">방 만들기</button>
    </form>
</div>

<!-- 페이지네이션 -->
<div style="text-align: center; margin-top: 20px;" th:if="${mapPage.totalPages > 1}">
    <a th:if="${currentPage > 0}"
       th:href="@{/rooms/create(page=${currentPage - 1}, keyword=${keyword})}"
       style="margin-right: 10px;">⬅ 이전</a>

    <span>페이지 <span th:text="${currentPage + 1}"></span> / <span th:text="${mapPage.totalPages}"></span></span>

    <a th:if="${currentPage + 1 < mapPage.totalPages}"
       th:href="@{/rooms/create(page=${currentPage + 1}, keyword=${keyword})}"
       style="margin-left: 10px;">다음 ➡</a>
</div>

</body>
</html>
